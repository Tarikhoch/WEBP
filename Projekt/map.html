<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <script src="https://code.highcharts.com/maps/highmaps.js"></script>
    <script src="https://code.highcharts.com/maps/modules/data.js"></script>
    <script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/maps/modules/offline-exporting.js"></script>
    <script src="https://code.highcharts.com/mapdata/custom/world.js"></script>

    <title>WEBP Projekt TAMM</title>
  </head>

  <body>
    <!-- HEADER NAV BAR -->
    <nav class="navbar navbar-expand-lg navbar-light" style="background-color: #CCE5FF">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html">Weltweite Schulden-Blase</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="index.html">Startseite</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="map.html">Weltkarte</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="live.html">Live Ticker</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Start Seiteninhalt -->
  <div class="main-div">
    <h1>Play with the map</h1>
    <div class="map">
      <div id="container_map">
        <div class="loading">
          <i class="icon-spinner icon-spin icon-large"></i>
          Loading data from Google Spreadsheets...
        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript">
  // Load the data from a Google Spreadsheet
  // https://docs.google.com/spreadsheets/d/1WBx3mRqiomXk_ks1a5sEAtJGvYukguhAkcCuRDrY1L0/pubhtml

  Highcharts.data({
  googleSpreadsheetKey: '1WBx3mRqiomXk_ks1a5sEAtJGvYukguhAkcCuRDrY1L0',

  // Custom handler when the spreadsheet is parsed
  parsed: function (columns) {

      // Read the columns into the data array
      var data = [];
      Highcharts.each(columns[0], function (code, i) {
          data.push({
              code: code.toUpperCase(),
              value: parseFloat(columns[2][i]),
              name: columns[1][i]
          });
      });

      // Initiate the chart
      Highcharts.mapChart('container_map', {
          chart: {
              map: 'custom/world',
              borderWidth: 1
          },

          colors: ['rgba(19,64,117,0.05)', 'rgba(19,64,117,0.2)', 'rgba(19,64,117,0.4)',
              'rgba(19,64,117,0.5)', 'rgba(19,64,117,0.6)', 'rgba(19,64,117,0.8)', 'rgba(19,64,117,1)'],

          title: {
              text: 'Population density by country (/km²)'
          },

          mapNavigation: {
              enabled: true
          },

          legend: {
              title: {
                  text: 'Individuals per km²',
                  style: {
                      color: ( // theme
                          Highcharts.defaultOptions &&
                          Highcharts.defaultOptions.legend &&
                          Highcharts.defaultOptions.legend.title &&
                          Highcharts.defaultOptions.legend.title.style &&
                          Highcharts.defaultOptions.legend.title.style.color
                      ) || 'black'
                  }
              },
              align: 'left',
              verticalAlign: 'bottom',
              floating: true,
              layout: 'vertical',
              valueDecimals: 0,
              backgroundColor: ( // theme
                  Highcharts.defaultOptions &&
                  Highcharts.defaultOptions.legend &&
                  Highcharts.defaultOptions.legend.backgroundColor
              ) || 'rgba(255, 255, 255, 0.85)',
              symbolRadius: 0,
              symbolHeight: 14
          },

          colorAxis: {
              dataClasses: [{
                  to: 3
              }, {
                  from: 3,
                  to: 10
              }, {
                  from: 10,
                  to: 30
              }, {
                  from: 30,
                  to: 100
              }, {
                  from: 100,
                  to: 300
              }, {
                  from: 300,
                  to: 1000
              }, {
                  from: 1000
              }]
          },

          series: [{
              data: data,
              joinBy: ['iso-a3', 'code'],
              animation: true,
              name: 'Population density',
              states: {
                  hover: {
                      color: '#a4edba'
                  }
              },
              tooltip: {
                  valueSuffix: '/km²'
              },
              shadow: false
          }]
      });
  },
  error: function () {
      document.getElementById('container_map').innerHTML = '<div class="loading">' +
          '<i class="icon-frown icon-large"></i> ' +
          'Error loading data from Google Spreadsheets' +
          '</div>';
  }
});
  </script>

  <footer class="footer mt-auto py-3 bg-light" class="footer">
    <div class="container">
      <span class="text-muted">&COPY all rights reserved by TAMM</span>
    </div>
  </footer>

  </body>
</html>
